{% extends 'base.html' %}

{% block title %}
  Home
{% endblock %}

{% block content %}
  <div class="container py-4">
    <h5 class="mb-4 text-secondary">{{ data|length }} results found.</h5>

    <div class="row">
      <!-- Sidebar: Category Filter -->
      <div class="col-md-2 mb-4">
        <div class="card shadow-sm p-3">
          <h6 class="text-center mb-3 fw-bold text-primary">Filter</h6>
          {% for c in category %}
            <div class="form-check mb-2">
              <input class="form-check-input" type="radio" name="category" id="cat{{ c.id }}" />
              <label class="form-check-label" for="cat{{ c.id }}"><a href="{% url 'category_wise_post' c.category_slug %}" class="text-decoration-none text-dark">{{ c.category_name }}</a></label>
            </div>
          {% empty %}
            <p class="text-muted small text-center">No categories available</p>
          {% endfor %}
        </div>
      </div>

      <!-- Main Content: Post Cards -->
      <div class="col-md-10">
        <div class="row g-4">
          {% for d in data %}
            <div class="col-sm-6 col-lg-4">
              <div class="card h-100 shadow-sm border-0 hover-shadow">
                <div class="card-body">
                  <h5 class="card-title text-primary">{{ d.post_title }}</h5>
                  <p class="card-text text-muted small">{{ d.post_content|truncatewords:20 }}</p>

                  <div class="mt-3">
                    <small class="d-block">üë§ <strong>Author:</strong> {{ d.post_author.username }}</small>
                    <small class="d-block">
                      üè∑Ô∏è <strong>Category:</strong>
                      {% for c in d.post_category.all %}
                        <span class="badge bg-info text-dark">{{ c.category_name }}</span>
                      {% empty %}
                        <span class="text-muted">No category</span>
                      {% endfor %}
                    </small>
                  </div>
                </div>

                <div class="card-footer bg-transparent border-0 d-flex justify-content-between">
                  <a href="{% url 'edit_post' d.id %}" class="btn btn-sm btn-success px-3">Edit</a>
                  <a href="{% url 'delete_post' d.id %}" class="btn btn-sm btn-danger px-3">Delete</a>
                </div>
              </div>
            </div>
          {% empty %}
            <div class="text-center py-5">
              <p class="text-muted">No posts available.</p>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

  <style>
    .hover-shadow {
      transition: all 0.2s ease;
    }
    .hover-shadow:hover {
      box-shadow: 0 0.8rem 1.5rem rgba(0, 0, 0, 0.1);
      transform: translateY(-3px);
    }
    .form-check-label a:hover {
      color: #0d6efd;
    }
  </style>
{% endblock %}
